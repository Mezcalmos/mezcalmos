query get_event_by_id($id: Int!) {
  business_event_by_pk(id: $id) {
    business {
      id
      details {
        id
        accepted_payments
        image
        name
      }
      reviews_aggregate {
        aggregate {
          avg {
            rating
          }
          count
        }
      }
    }
    id
    schedule
    schedule_type
    gps_location
    time
    details {
      additional_parameters
      available
      category1
      cost
      tags
      description {
        translations {
          language_id
          value
        }
      }
      id
      image
      name {
        translations {
          language_id
          value
        }
      }
      position
    }
  }
}

query get_event_by_category($categories1: [String!],
#  $distance: Float!, $from: geography!,
  $limit: Int, $offset: Int, 
  # $categories2: [String!],
   $schedule_type: [String!],
   $tags: [String!]) {
  business_event(
    where: {
      _and: {
        details: {
          _and: {
            category1: {
              _in: $categories1
            }, 
            # category2: {
            #   _in: $categories2
            # },
             tags: {_has_keys_all: $tags}
          }
        }, 
        schedule_type: {
          _in: $schedule_type
        }, 
        # _or: { 
        #   gps_location: {
        #     _st_d_within: {
        #       distance: $distance, 
        #       from: $from
        #     }
        #   }, 
        #   _and: {
        #     business: {
        #       details: {
        #         location: {
        #           gps: {
        #             _st_d_within: {
        #               distance: $distance, 
        #               from: $from
        #             }
        #           }
        #         }
        #       }
        #     }, 
        #     gps_location: {
        #       _is_null: true
        #     }
        #   }
        # }
      }
    }, limit: $limit, offset: $offset) {
    details {
      id
      name {
        translations {
          language_id
          value
        }
      }
      additional_parameters
      available
      category1
      cost
      tags
      image
      position
    }
    id
    gps_location
    schedule_type
    schedule
    time
    business {
      id
      details {
        id
        name
        location {
          gps
          address
        }
      }
    }
  }
}
