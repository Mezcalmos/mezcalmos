mutation insertReview($review: review_insert_input!) {
  insert_review_one(object: $review) {
    created_at
    id
  }
}

# get average rating
query get_service_review_average($serviceId: Int!) {
  review_aggregate(
    where: {
      from_entity_type: { _eq: "customer" }
      to_entity_id: { _eq: $serviceId }
    }
  ) {
    aggregate {
      avg {
        rating
      }
    }
  }
}
# get restaurant reviews
query get_service_reviews($serviceId: Int!) {
  review(
    where: {
      from_entity_type: { _eq: "customer" }
      to_entity_id: { _eq: $serviceId }
    }
  ) {
    from_entity_id
    from_entity_type
    rating
    note
    id
    to_entity_id
    to_entity_type
    created_at
     customer {
      
        user {
          id
          image
          name
        }
      }
  }
}
