query GetPastDeliveryMessages($driver_id: Int!, $limit: Int!, $offset: Int!) {
  delivery_messages(
    distinct_on: [phone_number, received_time]
    limit: $limit
    offset: $offset
    order_by: { received_time: desc, phone_number: desc }
    where: {
      driver_id: { _eq: $driver_id }
      finished_time: { _is_null: false }
    }
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
  }
}
query GetCurrentDeliveryMessages($driver_id: Int!) {
  delivery_messages(
    distinct_on: [phone_number, received_time]
    order_by: { received_time: desc, phone_number: desc }
    where: { driver_id: { _eq: $driver_id }, finished_time: { _is_null: true } }
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
  }
}
subscription listenCurrentDeliveryMessages($driver_id: Int!) {
  delivery_messages(
    distinct_on: phone_number
    where: { driver_id: { _eq: $driver_id }, finished_time: { _is_null: true } }
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
    driver {
      user {
        name
        phone
      }
    }
  }
}
query GetOpenDeliveryMessages {
  delivery_open_delivery_messages(
    distinct_on: phone_number
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
  }
}
subscription ListenOpenDeliveryMessages {
  delivery_open_delivery_messages(
    distinct_on: phone_number
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
  }
}

query GetAllCurrentDeliveryMessages($driver_id: Int!) {
  delivery_messages(
    distinct_on: [phone_number, received_time]
    order_by: { received_time: desc, phone_number: desc }
    where: {finished_time: { _is_null: true } }
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
  }
}

subscription listenAllCurrentDeliveryMessages($driver_id: Int!) {
  delivery_messages(
    distinct_on: phone_number
    where: {finished_time: { _is_null: true } }
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    customer {
      name
      image
    }
    driver {
      user {
        name
        phone
      }
    }
  }
}

query GetCustomerDeliveryMessages($phone_number: String!) {
  delivery_messages(
    where: { phone_number: { _eq: $phone_number } }
    order_by: { received_time: asc }
  ) {
    id
    entry
    phone_number
    driver_id
    received_time
    finished_time
    responded_time
    driver {
      user {
        name
        phone
      }
    }
    customer {
      name
      image
    }
  }
}
