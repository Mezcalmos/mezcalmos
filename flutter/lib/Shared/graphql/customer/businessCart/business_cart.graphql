query getBusinessCart($customer_id: Int!) {
  business_cart(where: { customer_id: { _eq: $customer_id } }) {
    items {
      id
      parameters
      cost
      item_id
      offering_type
      time
      home {
        available_for
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        id
        business {
          id
          details {
            id
            name
            currency
            online_ordering
            phone_number
            accepted_payments
            image
            location {
              gps
              address
            }
          }
        }
        bathrooms
        bedrooms
        location {
          address
          gps
          name
        }
        available_for
        offering_type
      }
      rental {
        id
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        business {
          id
          details {
            name
            currency
            online_ordering
            id
            phone_number
            accepted_payments
            image
          }
        }
      }
      product {
        id
        business {
          id
          details {
            name
            currency
            online_ordering
            id
            phone_number
            accepted_payments
            image
          }
        }
        details {
          additional_parameters
          available
          category1
          category2
          name_id
          description_id
          cost
          tags
          description {
            translations {
              language_id
              value
            }
          }
          id
          image
          name {
            translations {
              language_id
              value
            }
          }
        }
      }
      service {
        id
        business {
          id
          details {
            name
            currency
            id
            accepted_payments
            online_ordering
            phone_number
            image
          }
        }
        details {
          additional_parameters
          available
          category1
          name_id
          description_id
          category2
          cost
          tags
          description {
            translations {
              language_id
              value
            }
          }
          id
          image
          name {
            translations {
              language_id
              value
            }
          }
        }
      }
      event {
        id
        business {
          id
          details {
            name
            currency
            online_ordering
            id
            accepted_payments
            phone_number
            image
          }
        }
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        id
        schedule_type
        schedule
        starts_at
        ends_at
      }
    }
    business_id
    customer_id
    cost
  }
}

mutation insert_business_cart($cart: business_cart_insert_input!) {
  insert_business_cart_one(
    object: $cart
    on_conflict: { constraint: cart_pkey, update_columns: business_id }
  ) {
    customer_id
    business_id
  }
}

mutation addItemToBusinessCart($item: business_cart_item_insert_input!) {
  insert_business_cart_item_one(object: $item) {
    id
    customer_id
    time
    parameters
    offering_type
    item_id
    cost
  }
}

mutation update_business_cart_item(
  $id: Int!
  $cost: money!
  $parameters: jsonb!
  $time: timestamp!
) {
  update_business_cart_item_by_pk(
    pk_columns: { id: $id }
    _set: { cost: $cost, parameters: $parameters, time: $time }
  ) {
    id
  }
}

mutation set_cart_business_id($business_id: Int, $customer_id: Int!) {
  update_business_cart_by_pk(
    pk_columns: { customer_id: $customer_id }
    _set: { business_id: $business_id }
  ) {
    business_id
  }
}

mutation clear_business_cart($customer_id: Int!) {
  delete_business_cart_item(where: { customer_id: { _eq: $customer_id } }) {
    affected_rows
  }
}

mutation delete_business_cart_item($_id: Int!) {
  delete_business_cart_item(where: { id: { _eq: $_id } }) {
    affected_rows
  }
}

subscription listen_on_business_order_request($_id: Int!) {
  business_order_request(where: { customer_id: { _eq: $_id } }) {
    items {
      id
      parameters
      cost
      item_id
      offering_type
      time
      home {
        available_for
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        id
        business {
          id
          details {
            id
            name
            currency
            online_ordering
            phone_number
            accepted_payments
            image
            location {
              gps
              address
            }
          }
        }
        bathrooms
        bedrooms
        location {
          address
          gps
          name
        }
        available_for
        offering_type
      }
      rental {
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        business {
          id
          details {
            name
            online_ordering
            currency
            phone_number
            id
            accepted_payments
            image
          }
        }
      }
      product {
        business {
          id
          details {
            name
            currency
            id
            phone_number
            online_ordering
            accepted_payments
            image
          }
        }
        details {
          additional_parameters
          available
          category1
          category2
          name_id
          description_id
          cost
          tags
          description {
            translations {
              language_id
              value
            }
          }
          id
          image
          name {
            translations {
              language_id
              value
            }
          }
        }
      }
      service {
        id
        business {
          id
          details {
            name
            currency
            id
            phone_number
            accepted_payments
            online_ordering
            image
          }
        }
        details {
          additional_parameters
          available
          category1
          name_id
          description_id
          category2
          cost
          tags
          description {
            translations {
              language_id
              value
            }
          }
          id
          image
          name {
            translations {
              language_id
              value
            }
          }
        }
      }
      event {
        id
        business {
          id
          details {
            name
            currency
            id
            phone_number
            accepted_payments
            online_ordering
            image
          }
        }
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        id
        schedule_type
        schedule
        starts_at
        ends_at
      }
    }
    business_id
    status
    customer_id
    cost
    cancellation_time
    id
    chat_id
  }
}

query get_business_order_request($id: Int!) {
  business_order_request_by_pk(id: $id) {
    items {
      id
      parameters
      cost
      item_id
      offering_type
      time
      home {
        available_for
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        id
        business {
          id
          details {
            id
            name
            currency
            phone_number
            online_ordering
            accepted_payments
            image
            location {
              gps
              address
            }
          }
        }
        bathrooms
        bedrooms
        location {
          address
          gps
          name
        }
        available_for
        offering_type
      }
      rental {
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        business {
          id
          details {
            name
            phone_number
            online_ordering
            currency
            id
            accepted_payments
            image
          }
        }
      }
      product {
        business {
          id
          details {
            name
            currency
            id
            phone_number
            online_ordering
            accepted_payments
            image
          }
        }
        details {
          additional_parameters
          available
          category1
          category2
          name_id
          description_id
          cost
          tags
          description {
            translations {
              language_id
              value
            }
          }
          id
          image
          name {
            translations {
              language_id
              value
            }
          }
        }
      }
      service {
        id
        business {
          id
          details {
            name
            currency
            id
            phone_number
            accepted_payments
            online_ordering
            image
          }
        }
        details {
          additional_parameters
          available
          category1
          name_id
          description_id
          category2
          cost
          tags
          description {
            translations {
              language_id
              value
            }
          }
          id
          image
          name {
            translations {
              language_id
              value
            }
          }
        }
      }
      event {
        id
        business {
          id
          details {
            name
            currency
            id
            accepted_payments
            phone_number
            online_ordering
            image
          }
        }
        details {
          name_id
          description_id
          id
          name {
            translations {
              language_id
              value
            }
          }
          additional_parameters
          available
          category1
          category2
          cost
          image
          position
          tags
        }
        id
        schedule_type
        schedule
        starts_at
        ends_at
      }
    }
    business_id
    status
    customer_id
    cost
    cancellation_time
    id
    chat_id
  }
}

mutation update_product_item_count(
  $id: Int!
  $parameters: jsonb!
  $cost: money!
) {
  update_business_cart_item(
    where: { id: { _eq: $id }, offering_type: { _eq: "product" } }
    _set: { parameters: $parameters, cost: $cost }
  ) {
    affected_rows
  }
}
