mutation updateSubscriptionDataConsumption($name_of_subscription: String, $user_id: Int, $total_size: Int, $number_of_events: Int, $app_type_id: String!) {
  update_data_consumption(
    where: {
      name_of_subscription: {
        _eq: $name_of_subscription
      }, 
      user_id: {
        _eq: $user_id
      }, 
      date: {
        _eq: "now()"
      },
      app_type_id: {
        _eq: $app_type_id
      }
    }, 
    _inc: {
      total_size: $total_size, 
      number_of_events: $number_of_events
    }
  ) {
    affected_rows
  }
}

mutation insertSubscriptionDataConsumption($name_of_subscription: String, $total_size: Int, $user_id: Int, $app_type_id: String!) {
  insert_data_consumption_one(object: {name_of_subscription: $name_of_subscription, total_size: $total_size, user_id: $user_id, app_type_id: $app_type_id}) {
    date
  }
}
